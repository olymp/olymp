"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
var getTopMost = function getTopMost(schema, change, prev) {
  var next = prev ? change.value.document.getParent(prev.key) : change.value.startBlock;
  var nextType = next && next.type;
  var prevType = prev && prev.type;
  var isAtomic = nextType && schema.nodes[nextType] && schema.nodes[nextType].slate;
  if (!nextType || !isAtomic || prevType && prevType.indexOf(nextType) !== 0) {
    return prev;
  }
  return getTopMost(schema, change, next);
};
exports.default = getTopMost;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dGVybmFsL3NsYXRlL3V0aWxzL2dldC10b3AtbW9zdC5lczYiXSwibmFtZXMiOlsiZ2V0VG9wTW9zdCIsInNjaGVtYSIsImNoYW5nZSIsInByZXYiLCJuZXh0IiwidmFsdWUiLCJkb2N1bWVudCIsImdldFBhcmVudCIsImtleSIsInN0YXJ0QmxvY2siLCJuZXh0VHlwZSIsInR5cGUiLCJwcmV2VHlwZSIsImlzQXRvbWljIiwibm9kZXMiLCJzbGF0ZSIsImluZGV4T2YiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsSUFBTUEsYUFBYSxTQUFiQSxVQUFhLENBQUNDLE1BQUQsRUFBU0MsTUFBVCxFQUFpQkMsSUFBakIsRUFBMEI7QUFDM0MsTUFBTUMsT0FBT0QsT0FDVEQsT0FBT0csS0FBUCxDQUFhQyxRQUFiLENBQXNCQyxTQUF0QixDQUFnQ0osS0FBS0ssR0FBckMsQ0FEUyxHQUVUTixPQUFPRyxLQUFQLENBQWFJLFVBRmpCO0FBR0EsTUFBTUMsV0FBV04sUUFBUUEsS0FBS08sSUFBOUI7QUFDQSxNQUFNQyxXQUFXVCxRQUFRQSxLQUFLUSxJQUE5QjtBQUNBLE1BQU1FLFdBQ0pILFlBQVlULE9BQU9hLEtBQVAsQ0FBYUosUUFBYixDQUFaLElBQXNDVCxPQUFPYSxLQUFQLENBQWFKLFFBQWIsRUFBdUJLLEtBRC9EO0FBRUEsTUFDRSxDQUFDTCxRQUFELElBQ0EsQ0FBQ0csUUFERCxJQUVDRCxZQUFZQSxTQUFTSSxPQUFULENBQWlCTixRQUFqQixNQUErQixDQUg5QyxFQUlFO0FBQ0EsV0FBT1AsSUFBUDtBQUNEO0FBQ0QsU0FBT0gsV0FBV0MsTUFBWCxFQUFtQkMsTUFBbkIsRUFBMkJFLElBQTNCLENBQVA7QUFDRCxDQWhCRDtrQkFpQmVKLFUiLCJmaWxlIjoiZXh0ZXJuYWwvc2xhdGUvdXRpbHMvZ2V0LXRvcC1tb3N0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2V0VG9wTW9zdCA9IChzY2hlbWEsIGNoYW5nZSwgcHJldikgPT4ge1xuICBjb25zdCBuZXh0ID0gcHJldlxuICAgID8gY2hhbmdlLnZhbHVlLmRvY3VtZW50LmdldFBhcmVudChwcmV2LmtleSlcbiAgICA6IGNoYW5nZS52YWx1ZS5zdGFydEJsb2NrO1xuICBjb25zdCBuZXh0VHlwZSA9IG5leHQgJiYgbmV4dC50eXBlO1xuICBjb25zdCBwcmV2VHlwZSA9IHByZXYgJiYgcHJldi50eXBlO1xuICBjb25zdCBpc0F0b21pYyA9XG4gICAgbmV4dFR5cGUgJiYgc2NoZW1hLm5vZGVzW25leHRUeXBlXSAmJiBzY2hlbWEubm9kZXNbbmV4dFR5cGVdLnNsYXRlO1xuICBpZiAoXG4gICAgIW5leHRUeXBlIHx8XG4gICAgIWlzQXRvbWljIHx8XG4gICAgKHByZXZUeXBlICYmIHByZXZUeXBlLmluZGV4T2YobmV4dFR5cGUpICE9PSAwKVxuICApIHtcbiAgICByZXR1cm4gcHJldjtcbiAgfVxuICByZXR1cm4gZ2V0VG9wTW9zdChzY2hlbWEsIGNoYW5nZSwgbmV4dCk7XG59O1xuZXhwb3J0IGRlZmF1bHQgZ2V0VG9wTW9zdDtcbiJdfQ==
