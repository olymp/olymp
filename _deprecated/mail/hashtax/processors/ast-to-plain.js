import { traverse } from '../utils';

var defaultRenderer = function defaultRenderer(name, _ref) {
  var value = _ref.value,
      children = _ref.children,
      href = _ref.href;

  if (name === 'paragraph' && value === '') {
    return '';
  } else if (name === 'paragraph' && !value) {
    return '\n';
  } else if (name === 'paragraph') {
    return '' + value;
  } else if (name === 'h1') {
    return value + '\n';
  } else if (name === 'link') {
    return value + ' => ' + href;
  }
};

export default (function (ast, _ref2) {
  var renderer = _ref2.renderer,
      trim = _ref2.trim,
      context = _ref2.context;

  renderer = renderer || defaultRenderer;
  // object to react component
  var create = function create(name, props, decos) {
    if (props.value) {
      props.value = props.value.trim();
    }
    if (props.children) {
      props.children = props.children.join('');
    }
    var text = renderer(name, props);
    decos.forEach(function (_ref3) {
      var type = _ref3.type,
          args = _ref3.args;

      var newText = renderer('@{type}', props, text);
      if (newText !== undefined) {
        text = newText;
      }
    });
    return text;
  };
  return ast.map(traverse(create)(context)).join('');
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhY2thZ2VzL21haWwvaGFzaHRheC9wcm9jZXNzb3JzL2FzdC10by1wbGFpbi5lczYiXSwibmFtZXMiOlsidHJhdmVyc2UiLCJkZWZhdWx0UmVuZGVyZXIiLCJuYW1lIiwidmFsdWUiLCJjaGlsZHJlbiIsImhyZWYiLCJhc3QiLCJyZW5kZXJlciIsInRyaW0iLCJjb250ZXh0IiwiY3JlYXRlIiwicHJvcHMiLCJkZWNvcyIsImpvaW4iLCJ0ZXh0IiwiZm9yRWFjaCIsInR5cGUiLCJhcmdzIiwibmV3VGV4dCIsInVuZGVmaW5lZCIsIm1hcCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsUUFBVCxRQUF5QixVQUF6Qjs7QUFFQSxJQUFNQyxrQkFBa0IsU0FBbEJBLGVBQWtCLENBQUNDLElBQUQsUUFBcUM7QUFBQSxNQUE1QkMsS0FBNEIsUUFBNUJBLEtBQTRCO0FBQUEsTUFBckJDLFFBQXFCLFFBQXJCQSxRQUFxQjtBQUFBLE1BQVhDLElBQVcsUUFBWEEsSUFBVzs7QUFDM0QsTUFBSUgsU0FBUyxXQUFULElBQXdCQyxVQUFVLEVBQXRDLEVBQTBDO0FBQ3hDLFdBQU8sRUFBUDtBQUNELEdBRkQsTUFFTyxJQUFJRCxTQUFTLFdBQVQsSUFBd0IsQ0FBQ0MsS0FBN0IsRUFBb0M7QUFDekMsV0FBTyxJQUFQO0FBQ0QsR0FGTSxNQUVBLElBQUlELFNBQVMsV0FBYixFQUEwQjtBQUMvQixnQkFBVUMsS0FBVjtBQUNELEdBRk0sTUFFQSxJQUFJRCxTQUFTLElBQWIsRUFBbUI7QUFDeEIsV0FBVUMsS0FBVjtBQUNELEdBRk0sTUFFQSxJQUFJRCxTQUFTLE1BQWIsRUFBcUI7QUFDMUIsV0FBVUMsS0FBVixZQUFzQkUsSUFBdEI7QUFDRDtBQUNGLENBWkQ7O0FBY0EsZ0JBQWUsVUFBQ0MsR0FBRCxTQUFzQztBQUFBLE1BQTlCQyxRQUE4QixTQUE5QkEsUUFBOEI7QUFBQSxNQUFwQkMsSUFBb0IsU0FBcEJBLElBQW9CO0FBQUEsTUFBZEMsT0FBYyxTQUFkQSxPQUFjOztBQUNuREYsYUFBV0EsWUFBWU4sZUFBdkI7QUFDQTtBQUNBLE1BQU1TLFNBQVMsU0FBVEEsTUFBUyxDQUFDUixJQUFELEVBQU9TLEtBQVAsRUFBY0MsS0FBZCxFQUF3QjtBQUNyQyxRQUFJRCxNQUFNUixLQUFWLEVBQWlCO0FBQ2ZRLFlBQU1SLEtBQU4sR0FBY1EsTUFBTVIsS0FBTixDQUFZSyxJQUFaLEVBQWQ7QUFDRDtBQUNELFFBQUlHLE1BQU1QLFFBQVYsRUFBb0I7QUFDbEJPLFlBQU1QLFFBQU4sR0FBaUJPLE1BQU1QLFFBQU4sQ0FBZVMsSUFBZixDQUFvQixFQUFwQixDQUFqQjtBQUNEO0FBQ0QsUUFBSUMsT0FBT1AsU0FBU0wsSUFBVCxFQUFlUyxLQUFmLENBQVg7QUFDQUMsVUFBTUcsT0FBTixDQUFjLGlCQUFvQjtBQUFBLFVBQWpCQyxJQUFpQixTQUFqQkEsSUFBaUI7QUFBQSxVQUFYQyxJQUFXLFNBQVhBLElBQVc7O0FBQ2hDLFVBQU1DLFVBQVVYLFNBQVMsU0FBVCxFQUFvQkksS0FBcEIsRUFBMkJHLElBQTNCLENBQWhCO0FBQ0EsVUFBSUksWUFBWUMsU0FBaEIsRUFBMkI7QUFDekJMLGVBQU9JLE9BQVA7QUFDRDtBQUNGLEtBTEQ7QUFNQSxXQUFPSixJQUFQO0FBQ0QsR0FmRDtBQWdCQSxTQUFPUixJQUFJYyxHQUFKLENBQVFwQixTQUFTVSxNQUFULEVBQWlCRCxPQUFqQixDQUFSLEVBQW1DSSxJQUFuQyxDQUF3QyxFQUF4QyxDQUFQO0FBQ0QsQ0FwQkQiLCJmaWxlIjoicGFja2FnZXMvbWFpbC9oYXNodGF4L3Byb2Nlc3NvcnMvYXN0LXRvLXBsYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdHJhdmVyc2UgfSBmcm9tICcuLi91dGlscyc7XG5cbmNvbnN0IGRlZmF1bHRSZW5kZXJlciA9IChuYW1lLCB7IHZhbHVlLCBjaGlsZHJlbiwgaHJlZiB9KSA9PiB7XG4gIGlmIChuYW1lID09PSAncGFyYWdyYXBoJyAmJiB2YWx1ZSA9PT0gJycpIHtcbiAgICByZXR1cm4gJyc7XG4gIH0gZWxzZSBpZiAobmFtZSA9PT0gJ3BhcmFncmFwaCcgJiYgIXZhbHVlKSB7XG4gICAgcmV0dXJuICdcXG4nO1xuICB9IGVsc2UgaWYgKG5hbWUgPT09ICdwYXJhZ3JhcGgnKSB7XG4gICAgcmV0dXJuIGAke3ZhbHVlfWA7XG4gIH0gZWxzZSBpZiAobmFtZSA9PT0gJ2gxJykge1xuICAgIHJldHVybiBgJHt2YWx1ZX1cXG5gO1xuICB9IGVsc2UgaWYgKG5hbWUgPT09ICdsaW5rJykge1xuICAgIHJldHVybiBgJHt2YWx1ZX0gPT4gJHtocmVmfWA7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IChhc3QsIHsgcmVuZGVyZXIsIHRyaW0sIGNvbnRleHQgfSkgPT4ge1xuICByZW5kZXJlciA9IHJlbmRlcmVyIHx8IGRlZmF1bHRSZW5kZXJlcjtcbiAgLy8gb2JqZWN0IHRvIHJlYWN0IGNvbXBvbmVudFxuICBjb25zdCBjcmVhdGUgPSAobmFtZSwgcHJvcHMsIGRlY29zKSA9PiB7XG4gICAgaWYgKHByb3BzLnZhbHVlKSB7XG4gICAgICBwcm9wcy52YWx1ZSA9IHByb3BzLnZhbHVlLnRyaW0oKTtcbiAgICB9XG4gICAgaWYgKHByb3BzLmNoaWxkcmVuKSB7XG4gICAgICBwcm9wcy5jaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuLmpvaW4oJycpO1xuICAgIH1cbiAgICBsZXQgdGV4dCA9IHJlbmRlcmVyKG5hbWUsIHByb3BzKTtcbiAgICBkZWNvcy5mb3JFYWNoKCh7IHR5cGUsIGFyZ3MgfSkgPT4ge1xuICAgICAgY29uc3QgbmV3VGV4dCA9IHJlbmRlcmVyKCdAe3R5cGV9JywgcHJvcHMsIHRleHQpO1xuICAgICAgaWYgKG5ld1RleHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0ZXh0ID0gbmV3VGV4dDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGV4dDtcbiAgfTtcbiAgcmV0dXJuIGFzdC5tYXAodHJhdmVyc2UoY3JlYXRlKShjb250ZXh0KSkuam9pbignJyk7XG59O1xuIl19
