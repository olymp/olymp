function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

export default (function (array) {
  var attrib = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'name';

  // can be 'name', x => x.name || x.title, (todo: ['name', 'title'], [x => x.name, x => x.title])
  array = [].concat(_toConsumableArray(array));
  var getAttrib = function getAttrib(x) {
    if (attrib && typeof attrib === 'string') {
      return x[attrib];
    }
    if (attrib && typeof attrib === 'function') {
      return attrib(x);
    }
    return '';
  };
  array.sort(function (a, b) {
    return compare(getAttrib(a), getAttrib(b));
  });
  return array;
});

var compare = function compare(left, right, idx) {
  idx = idx === undefined ? 0 : idx++;
  var run = right.length <= left.length ? idx < right.length - 1 : idx < left.length - 1;
  if (!run) {
    if (left[0].localeCompare(right[0]) === 0) {
      return left.localeCompare(right);
    }
    return left[0].localeCompare(right[0]);
  }

  if (left.localeCompare(right) !== left[0].localeCompare(right[0])) {
    var myLeft = left.slice(1, left.length);
    var myRight = right.slice(1, right.length);
    if (myLeft.localeCompare(myRight) !== myLeft[0].localeCompare(myRight[0])) {
      return compare(myLeft, myRight, idx);
    }
    if (left[0].localeCompare(right[0]) === 0) {
      return compare(myLeft, myRight, idx);
    }
    return left[0].localeCompare(right[0]);
  }
  return left.localeCompare(right);
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhY2thZ2VzL3V0aWxzL3NvcnQtYnkuZXM2Il0sIm5hbWVzIjpbImFycmF5IiwiYXR0cmliIiwiZ2V0QXR0cmliIiwieCIsInNvcnQiLCJhIiwiYiIsImNvbXBhcmUiLCJsZWZ0IiwicmlnaHQiLCJpZHgiLCJ1bmRlZmluZWQiLCJydW4iLCJsZW5ndGgiLCJsb2NhbGVDb21wYXJlIiwibXlMZWZ0Iiwic2xpY2UiLCJteVJpZ2h0Il0sIm1hcHBpbmdzIjoiOztBQUFBLGdCQUFlLFVBQUNBLEtBQUQsRUFBNEI7QUFBQSxNQUFwQkMsTUFBb0IsdUVBQVgsTUFBVzs7QUFDekM7QUFDQUQsdUNBQVlBLEtBQVo7QUFDQSxNQUFNRSxZQUFZLFNBQVpBLFNBQVksQ0FBQ0MsQ0FBRCxFQUFPO0FBQ3ZCLFFBQUlGLFVBQVUsT0FBT0EsTUFBUCxLQUFrQixRQUFoQyxFQUEwQztBQUFFLGFBQU9FLEVBQUVGLE1BQUYsQ0FBUDtBQUFtQjtBQUMvRCxRQUFJQSxVQUFVLE9BQU9BLE1BQVAsS0FBa0IsVUFBaEMsRUFBNEM7QUFBRSxhQUFPQSxPQUFPRSxDQUFQLENBQVA7QUFBbUI7QUFDakUsV0FBTyxFQUFQO0FBQ0QsR0FKRDtBQUtBSCxRQUFNSSxJQUFOLENBQVcsVUFBQ0MsQ0FBRCxFQUFJQyxDQUFKO0FBQUEsV0FBVUMsUUFBUUwsVUFBVUcsQ0FBVixDQUFSLEVBQXNCSCxVQUFVSSxDQUFWLENBQXRCLENBQVY7QUFBQSxHQUFYO0FBQ0EsU0FBT04sS0FBUDtBQUNELENBVkQ7O0FBWUEsSUFBTU8sVUFBVSxTQUFWQSxPQUFVLENBQUNDLElBQUQsRUFBT0MsS0FBUCxFQUFjQyxHQUFkLEVBQXNCO0FBQ3BDQSxRQUFNQSxRQUFRQyxTQUFSLEdBQW9CLENBQXBCLEdBQXdCRCxLQUE5QjtBQUNBLE1BQU1FLE1BQU1ILE1BQU1JLE1BQU4sSUFBZ0JMLEtBQUtLLE1BQXJCLEdBQ1JILE1BQU1ELE1BQU1JLE1BQU4sR0FBZSxDQURiLEdBRVJILE1BQU1GLEtBQUtLLE1BQUwsR0FBYyxDQUZ4QjtBQUdBLE1BQUksQ0FBQ0QsR0FBTCxFQUFVO0FBQ1IsUUFBSUosS0FBSyxDQUFMLEVBQVFNLGFBQVIsQ0FBc0JMLE1BQU0sQ0FBTixDQUF0QixNQUFvQyxDQUF4QyxFQUEyQztBQUN6QyxhQUFPRCxLQUFLTSxhQUFMLENBQW1CTCxLQUFuQixDQUFQO0FBQ0Q7QUFDRCxXQUFPRCxLQUFLLENBQUwsRUFBUU0sYUFBUixDQUFzQkwsTUFBTSxDQUFOLENBQXRCLENBQVA7QUFDRDs7QUFFRCxNQUFJRCxLQUFLTSxhQUFMLENBQW1CTCxLQUFuQixNQUE4QkQsS0FBSyxDQUFMLEVBQVFNLGFBQVIsQ0FBc0JMLE1BQU0sQ0FBTixDQUF0QixDQUFsQyxFQUFtRTtBQUNqRSxRQUFNTSxTQUFTUCxLQUFLUSxLQUFMLENBQVcsQ0FBWCxFQUFjUixLQUFLSyxNQUFuQixDQUFmO0FBQ0EsUUFBTUksVUFBVVIsTUFBTU8sS0FBTixDQUFZLENBQVosRUFBZVAsTUFBTUksTUFBckIsQ0FBaEI7QUFDQSxRQUFJRSxPQUFPRCxhQUFQLENBQXFCRyxPQUFyQixNQUFrQ0YsT0FBTyxDQUFQLEVBQVVELGFBQVYsQ0FBd0JHLFFBQVEsQ0FBUixDQUF4QixDQUF0QyxFQUEyRTtBQUN6RSxhQUFPVixRQUFRUSxNQUFSLEVBQWdCRSxPQUFoQixFQUF5QlAsR0FBekIsQ0FBUDtBQUNEO0FBQ0QsUUFBSUYsS0FBSyxDQUFMLEVBQVFNLGFBQVIsQ0FBc0JMLE1BQU0sQ0FBTixDQUF0QixNQUFvQyxDQUF4QyxFQUEyQztBQUN6QyxhQUFPRixRQUFRUSxNQUFSLEVBQWdCRSxPQUFoQixFQUF5QlAsR0FBekIsQ0FBUDtBQUNEO0FBQ0QsV0FBT0YsS0FBSyxDQUFMLEVBQVFNLGFBQVIsQ0FBc0JMLE1BQU0sQ0FBTixDQUF0QixDQUFQO0FBQ0Q7QUFDRCxTQUFPRCxLQUFLTSxhQUFMLENBQW1CTCxLQUFuQixDQUFQO0FBQ0QsQ0F4QkQiLCJmaWxlIjoicGFja2FnZXMvdXRpbHMvc29ydC1ieS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IChhcnJheSwgYXR0cmliID0gJ25hbWUnKSA9PiB7XG4gIC8vIGNhbiBiZSAnbmFtZScsIHggPT4geC5uYW1lIHx8IHgudGl0bGUsICh0b2RvOiBbJ25hbWUnLCAndGl0bGUnXSwgW3ggPT4geC5uYW1lLCB4ID0+IHgudGl0bGVdKVxuICBhcnJheSA9IFsuLi5hcnJheV07XG4gIGNvbnN0IGdldEF0dHJpYiA9ICh4KSA9PiB7XG4gICAgaWYgKGF0dHJpYiAmJiB0eXBlb2YgYXR0cmliID09PSAnc3RyaW5nJykgeyByZXR1cm4geFthdHRyaWJdOyB9XG4gICAgaWYgKGF0dHJpYiAmJiB0eXBlb2YgYXR0cmliID09PSAnZnVuY3Rpb24nKSB7IHJldHVybiBhdHRyaWIoeCk7IH1cbiAgICByZXR1cm4gJyc7XG4gIH07XG4gIGFycmF5LnNvcnQoKGEsIGIpID0+IGNvbXBhcmUoZ2V0QXR0cmliKGEpLCBnZXRBdHRyaWIoYikpKTtcbiAgcmV0dXJuIGFycmF5O1xufTtcblxuY29uc3QgY29tcGFyZSA9IChsZWZ0LCByaWdodCwgaWR4KSA9PiB7XG4gIGlkeCA9IGlkeCA9PT0gdW5kZWZpbmVkID8gMCA6IGlkeCsrO1xuICBjb25zdCBydW4gPSByaWdodC5sZW5ndGggPD0gbGVmdC5sZW5ndGhcbiAgICA/IGlkeCA8IHJpZ2h0Lmxlbmd0aCAtIDFcbiAgICA6IGlkeCA8IGxlZnQubGVuZ3RoIC0gMTtcbiAgaWYgKCFydW4pIHtcbiAgICBpZiAobGVmdFswXS5sb2NhbGVDb21wYXJlKHJpZ2h0WzBdKSA9PT0gMCkge1xuICAgICAgcmV0dXJuIGxlZnQubG9jYWxlQ29tcGFyZShyaWdodCk7XG4gICAgfVxuICAgIHJldHVybiBsZWZ0WzBdLmxvY2FsZUNvbXBhcmUocmlnaHRbMF0pO1xuICB9XG5cbiAgaWYgKGxlZnQubG9jYWxlQ29tcGFyZShyaWdodCkgIT09IGxlZnRbMF0ubG9jYWxlQ29tcGFyZShyaWdodFswXSkpIHtcbiAgICBjb25zdCBteUxlZnQgPSBsZWZ0LnNsaWNlKDEsIGxlZnQubGVuZ3RoKTtcbiAgICBjb25zdCBteVJpZ2h0ID0gcmlnaHQuc2xpY2UoMSwgcmlnaHQubGVuZ3RoKTtcbiAgICBpZiAobXlMZWZ0LmxvY2FsZUNvbXBhcmUobXlSaWdodCkgIT09IG15TGVmdFswXS5sb2NhbGVDb21wYXJlKG15UmlnaHRbMF0pKSB7XG4gICAgICByZXR1cm4gY29tcGFyZShteUxlZnQsIG15UmlnaHQsIGlkeCk7XG4gICAgfVxuICAgIGlmIChsZWZ0WzBdLmxvY2FsZUNvbXBhcmUocmlnaHRbMF0pID09PSAwKSB7XG4gICAgICByZXR1cm4gY29tcGFyZShteUxlZnQsIG15UmlnaHQsIGlkeCk7XG4gICAgfVxuICAgIHJldHVybiBsZWZ0WzBdLmxvY2FsZUNvbXBhcmUocmlnaHRbMF0pO1xuICB9XG4gIHJldHVybiBsZWZ0LmxvY2FsZUNvbXBhcmUocmlnaHQpO1xufTtcbiJdfQ==
