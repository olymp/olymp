import http from 'http';
import app from './server';
var server = http.createServer(app);
var currentApp = app;
var port = parseInt(process.env.PORT || 3000, 10);
server.listen(port, process.env.NODE_ENV !== 'production' ? '0.0.0.0' : undefined, function (err) {
    console.log('Listening', err);
});
if (module.hot) {
    module.hot.accept('./server', function () {
        server.removeListener('request', currentApp);
        server.on('request', app);
        currentApp = app;
    });
}
process.on('uncaughtException', function (err) {
    console.error(new Date().toUTCString() + " uncaughtException: " + err.message);
    console.error(err.stack);
    process.exit(1);
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhY2thZ2VzL2NvcmUvbm9kZS9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLElBQUksTUFBTSxNQUFNLENBQUM7QUFDeEIsT0FBTyxHQUFHLE1BQU0sVUFBVSxDQUFDO0FBRTNCLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDdEMsSUFBSSxVQUFVLEdBQUcsR0FBRyxDQUFDO0FBQ3JCLElBQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7QUFDcEQsTUFBTSxDQUFDLE1BQU0sQ0FDWCxJQUFJLEVBQ0osT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEtBQUssWUFBWSxHQUFHLFNBQVMsR0FBRyxTQUFTLEVBQzdELFVBQUEsR0FBRztJQUNELE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ2hDLENBQUMsQ0FDRixDQUFDO0FBR0YsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDZixNQUFNLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUU7UUFDNUIsTUFBTSxDQUFDLGNBQWMsQ0FBQyxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFFN0MsTUFBTSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDMUIsVUFBVSxHQUFHLEdBQUcsQ0FBQztJQUVuQixDQUFDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFFRCxPQUFPLENBQUMsRUFBRSxDQUFDLG1CQUFtQixFQUFFLFVBQUEsR0FBRztJQUNqQyxPQUFPLENBQUMsS0FBSyxDQUNSLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLDRCQUF1QixHQUFHLENBQUMsT0FBUyxDQUNoRSxDQUFDO0lBQ0YsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDekIsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQixDQUFDLENBQUMsQ0FBQyIsImZpbGUiOiJwYWNrYWdlcy9jb3JlL25vZGUvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgaHR0cCBmcm9tICdodHRwJztcbmltcG9ydCBhcHAgZnJvbSAnLi9zZXJ2ZXInO1xuXG5jb25zdCBzZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApO1xubGV0IGN1cnJlbnRBcHAgPSBhcHA7XG5jb25zdCBwb3J0ID0gcGFyc2VJbnQocHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwLCAxMCk7XG5zZXJ2ZXIubGlzdGVuKFxuICBwb3J0LFxuICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nID8gJzAuMC4wLjAnIDogdW5kZWZpbmVkLFxuICBlcnIgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdMaXN0ZW5pbmcnLCBlcnIpO1xuICB9XG4pO1xuLy8gbGV0IHdzID0gYXBwLmxpc3RlbldTKHsgc2VydmVyIH0pO1xuXG5pZiAobW9kdWxlLmhvdCkge1xuICBtb2R1bGUuaG90LmFjY2VwdCgnLi9zZXJ2ZXInLCAoKSA9PiB7XG4gICAgc2VydmVyLnJlbW92ZUxpc3RlbmVyKCdyZXF1ZXN0JywgY3VycmVudEFwcCk7XG4gICAgLy8gd3MuY2xvc2UoKTtcbiAgICBzZXJ2ZXIub24oJ3JlcXVlc3QnLCBhcHApO1xuICAgIGN1cnJlbnRBcHAgPSBhcHA7XG4gICAgLy8gd3MgPSBhcHAubGlzdGVuV1MoeyBzZXJ2ZXIgfSk7XG4gIH0pO1xufVxuXG5wcm9jZXNzLm9uKCd1bmNhdWdodEV4Y2VwdGlvbicsIGVyciA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoXG4gICAgYCR7bmV3IERhdGUoKS50b1VUQ1N0cmluZygpfSB1bmNhdWdodEV4Y2VwdGlvbjogJHtlcnIubWVzc2FnZX1gXG4gICk7XG4gIGNvbnNvbGUuZXJyb3IoZXJyLnN0YWNrKTtcbiAgcHJvY2Vzcy5leGl0KDEpO1xufSk7XG4iXX0=
