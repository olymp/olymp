
var eq = function eq(a, b) {
  return a === b;
};
var first = function first(a, b) {
  return a && a[0] === b;
};
var last = function last(a, b) {
  return a && a[a.length - 1] === b;
};
var ensure = function ensure(a, p, b) {
  return !a[p] ? a[p] = b : null;
};

export default (function () {
  var schema = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

  if (!first(schema, '[')) schema = '[' + schema + ']';
  var result = [];
  var path = [result];

  var _loop = function _loop(i) {
    var char = schema[i];
    var currentPath = path[path.length - 1];
    var prevPath = path[path.length - 2];
    var finish = function finish() {
      if (currentPath.width) {
        currentPath.width = last(currentPath.width, '%') ? currentPath.width : parseInt(currentPath.width);
      }
      if (currentPath.height) {
        currentPath.height = last(currentPath.height, '%') ? currentPath.height : parseInt(currentPath.height);
      }
      if (currentPath.size) {
        currentPath.size = parseInt(currentPath.size);
      }
      if (currentPath.repeat) {
        currentPath.repeat = parseInt(currentPath.repeat);
      }
      if (currentPath.type === 'cg') {
        currentPath.container = true;
        currentPath.grid = true;
      }
      if (currentPath.type === 'sc') {
        currentPath.container = true;
        currentPath.size = 'small';
      }
      if (currentPath.type === 'g') {
        currentPath.grid = true;
      }
      if (currentPath.type === 'c') {
        currentPath.container = true;
      }
      delete currentPath.type;
    };
    if (eq(char, '[')) {
      ensure(currentPath, 'children', []);
      path.push({});
    } else if (eq(char, ']')) {
      finish();
      prevPath.children.push(path.pop());
    } else if (eq(char, ',')) {
      finish();
      prevPath.children.push(path.pop());
      path.push({});
    } else if (['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '%'].includes(char)) {
      if (currentPath.repeat !== undefined) {
        currentPath.repeat += char;
      } else if (currentPath.type !== undefined) {
        ensure(currentPath, 'size', '');
        currentPath.size += char;
      } else if (currentPath.width !== undefined) {
        currentPath.width += char;
      } else {
        ensure(currentPath, 'height', '');
        currentPath.height += char;
      }
    } else if (eq(char, '*')) {
      ensure(currentPath, 'repeat', '');
    } else if (eq(char, 'x')) {
      ensure(currentPath, 'width', '');
    } else {
      ensure(currentPath, 'type', '');
      currentPath.type += char;
    }
  };

  for (var i = 0; i < schema.length; i++) {
    _loop(i);
  }

  return result.children;
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhY2thZ2VzL2ZlbGEvbG9hZGVyL3BhcnNlLmVzNiJdLCJuYW1lcyI6WyJlcSIsImEiLCJiIiwiZmlyc3QiLCJsYXN0IiwibGVuZ3RoIiwiZW5zdXJlIiwicCIsInNjaGVtYSIsInJlc3VsdCIsInBhdGgiLCJpIiwiY2hhciIsImN1cnJlbnRQYXRoIiwicHJldlBhdGgiLCJmaW5pc2giLCJ3aWR0aCIsInBhcnNlSW50IiwiaGVpZ2h0Iiwic2l6ZSIsInJlcGVhdCIsInR5cGUiLCJjb250YWluZXIiLCJncmlkIiwicHVzaCIsImNoaWxkcmVuIiwicG9wIiwiaW5jbHVkZXMiLCJ1bmRlZmluZWQiXSwibWFwcGluZ3MiOiI7QUFDQSxJQUFNQSxLQUFLLFNBQUxBLEVBQUssQ0FBQ0MsQ0FBRCxFQUFJQyxDQUFKO0FBQUEsU0FBVUQsTUFBTUMsQ0FBaEI7QUFBQSxDQUFYO0FBQ0EsSUFBTUMsUUFBUSxTQUFSQSxLQUFRLENBQUNGLENBQUQsRUFBSUMsQ0FBSjtBQUFBLFNBQVVELEtBQUtBLEVBQUUsQ0FBRixNQUFTQyxDQUF4QjtBQUFBLENBQWQ7QUFDQSxJQUFNRSxPQUFPLFNBQVBBLElBQU8sQ0FBQ0gsQ0FBRCxFQUFJQyxDQUFKO0FBQUEsU0FBVUQsS0FBS0EsRUFBRUEsRUFBRUksTUFBRixHQUFXLENBQWIsTUFBb0JILENBQW5DO0FBQUEsQ0FBYjtBQUNBLElBQU1JLFNBQVMsU0FBVEEsTUFBUyxDQUFDTCxDQUFELEVBQUlNLENBQUosRUFBT0wsQ0FBUDtBQUFBLFNBQWMsQ0FBQ0QsRUFBRU0sQ0FBRixDQUFELEdBQVNOLEVBQUVNLENBQUYsSUFBT0wsQ0FBaEIsR0FBcUIsSUFBbkM7QUFBQSxDQUFmOztBQUVBLGdCQUFlLFlBQWlCO0FBQUEsTUFBaEJNLE1BQWdCLHVFQUFQLEVBQU87O0FBQzlCLE1BQUksQ0FBQ0wsTUFBTUssTUFBTixFQUFjLEdBQWQsQ0FBTCxFQUF5QkEsZUFBYUEsTUFBYjtBQUN6QixNQUFJQyxTQUFTLEVBQWI7QUFDQSxNQUFJQyxP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b0JQLElBQXBCO0FBQ0QsT0FITSxNQUdBLElBQUlDLFlBQVlHLEtBQVosS0FBc0JZLFNBQTFCLEVBQXFDO0FBQzFDZixvQkFBWUcsS0FBWixJQUFxQkosSUFBckI7QUFDRCxPQUZNLE1BRUE7QUFDTE4sZUFBT08sV0FBUCxFQUFvQixRQUFwQixFQUE4QixFQUE5QjtBQUNBQSxvQkFBWUssTUFBWixJQUFzQk4sSUFBdEI7QUFDRDtBQUNGLEtBZE0sTUFjQSxJQUFJWixHQUFHWSxJQUFILEVBQVMsR0FBVCxDQUFKLEVBQW1CO0FBQ3hCTixhQUFPTyxXQUFQLEVBQW9CLFFBQXBCLEVBQThCLEVBQTlCO0FBQ0QsS0FGTSxNQUVBLElBQUliLEdBQUdZLElBQUgsRUFBUyxHQUFULENBQUosRUFBbUI7QUFDeEJOLGFBQU9PLFdBQVAsRUFBb0IsT0FBcEIsRUFBNkIsRUFBN0I7QUFDRCxLQUZNLE1BRUE7QUFDTFAsYUFBT08sV0FBUCxFQUFvQixNQUFwQixFQUE0QixFQUE1QjtBQUNBQSxrQkFBWVEsSUFBWixJQUFvQlQsSUFBcEI7QUFDRDtBQXBFMkI7O0FBSTlCLE9BQUssSUFBSUQsSUFBSSxDQUFiLEVBQWdCQSxJQUFJSCxPQUFPSCxNQUEzQixFQUFtQ00sR0FBbkMsRUFBd0M7QUFBQSxVQUEvQkEsQ0FBK0I7QUFpRXZDOztBQUVELFNBQU9GLE9BQU9nQixRQUFkO0FBQ0QsQ0F4RUQiLCJmaWxlIjoicGFja2FnZXMvZmVsYS9sb2FkZXIvcGFyc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IGVxID0gKGEsIGIpID0+IGEgPT09IGI7XG5jb25zdCBmaXJzdCA9IChhLCBiKSA9PiBhICYmIGFbMF0gPT09IGI7XG5jb25zdCBsYXN0ID0gKGEsIGIpID0+IGEgJiYgYVthLmxlbmd0aCAtIDFdID09PSBiO1xuY29uc3QgZW5zdXJlID0gKGEsIHAsIGIpID0+ICghYVtwXSA/IChhW3BdID0gYikgOiBudWxsKTtcblxuZXhwb3J0IGRlZmF1bHQgKHNjaGVtYSA9ICcnKSA9PiB7XG4gIGlmICghZmlyc3Qoc2NoZW1hLCAnWycpKSBzY2hlbWEgPSBgWyR7c2NoZW1hfV1gO1xuICBsZXQgcmVzdWx0ID0gW107XG4gIGxldCBwYXRoID0gW3Jlc3VsdF07XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2NoZW1hLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY2hhciA9IHNjaGVtYVtpXTtcbiAgICBjb25zdCBjdXJyZW50UGF0aCA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgICBjb25zdCBwcmV2UGF0aCA9IHBhdGhbcGF0aC5sZW5ndGggLSAyXTtcbiAgICBjb25zdCBmaW5pc2ggPSAoKSA9PiB7XG4gICAgICBpZiAoY3VycmVudFBhdGgud2lkdGgpIHtcbiAgICAgICAgY3VycmVudFBhdGgud2lkdGggPSBsYXN0KGN1cnJlbnRQYXRoLndpZHRoLCAnJScpID8gY3VycmVudFBhdGgud2lkdGggOiBwYXJzZUludChjdXJyZW50UGF0aC53aWR0aCk7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFBhdGguaGVpZ2h0KSB7XG4gICAgICAgIGN1cnJlbnRQYXRoLmhlaWdodCA9IGxhc3QoY3VycmVudFBhdGguaGVpZ2h0LCAnJScpID8gY3VycmVudFBhdGguaGVpZ2h0IDogcGFyc2VJbnQoY3VycmVudFBhdGguaGVpZ2h0KTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50UGF0aC5zaXplKSB7XG4gICAgICAgIGN1cnJlbnRQYXRoLnNpemUgPSBwYXJzZUludChjdXJyZW50UGF0aC5zaXplKTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50UGF0aC5yZXBlYXQpIHtcbiAgICAgICAgY3VycmVudFBhdGgucmVwZWF0ID0gcGFyc2VJbnQoY3VycmVudFBhdGgucmVwZWF0KTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50UGF0aC50eXBlID09PSAnY2cnKSB7XG4gICAgICAgIGN1cnJlbnRQYXRoLmNvbnRhaW5lciA9IHRydWU7XG4gICAgICAgIGN1cnJlbnRQYXRoLmdyaWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnRQYXRoLnR5cGUgPT09ICdzYycpIHtcbiAgICAgICAgY3VycmVudFBhdGguY29udGFpbmVyID0gdHJ1ZTtcbiAgICAgICAgY3VycmVudFBhdGguc2l6ZSA9ICdzbWFsbCc7XG4gICAgICB9XG4gICAgICBpZiAoY3VycmVudFBhdGgudHlwZSA9PT0gJ2cnKSB7XG4gICAgICAgIGN1cnJlbnRQYXRoLmdyaWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnRQYXRoLnR5cGUgPT09ICdjJykge1xuICAgICAgICBjdXJyZW50UGF0aC5jb250YWluZXIgPSB0cnVlO1xuICAgICAgfVxuICAgICAgZGVsZXRlIGN1cnJlbnRQYXRoLnR5cGU7XG4gICAgfVxuICAgIGlmIChlcShjaGFyLCAnWycpKSB7XG4gICAgICBlbnN1cmUoY3VycmVudFBhdGgsICdjaGlsZHJlbicsIFtdKTtcbiAgICAgIHBhdGgucHVzaCh7fSk7XG4gICAgfSBlbHNlIGlmIChlcShjaGFyLCAnXScpKSB7XG4gICAgICBmaW5pc2goKTtcbiAgICAgIHByZXZQYXRoLmNoaWxkcmVuLnB1c2gocGF0aC5wb3AoKSk7XG4gICAgfSBlbHNlIGlmIChlcShjaGFyLCAnLCcpKSB7XG4gICAgICBmaW5pc2goKTtcbiAgICAgIHByZXZQYXRoLmNoaWxkcmVuLnB1c2gocGF0aC5wb3AoKSk7XG4gICAgICBwYXRoLnB1c2goe30pO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICBbJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnJSddLmluY2x1ZGVzKGNoYXIpXG4gICAgKSB7XG4gICAgICBpZiAoY3VycmVudFBhdGgucmVwZWF0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY3VycmVudFBhdGgucmVwZWF0ICs9IGNoYXI7XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnRQYXRoLnR5cGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlbnN1cmUoY3VycmVudFBhdGgsICdzaXplJywgJycpO1xuICAgICAgICBjdXJyZW50UGF0aC5zaXplICs9IGNoYXI7XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnRQYXRoLndpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY3VycmVudFBhdGgud2lkdGggKz0gY2hhcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVuc3VyZShjdXJyZW50UGF0aCwgJ2hlaWdodCcsICcnKTtcbiAgICAgICAgY3VycmVudFBhdGguaGVpZ2h0ICs9IGNoYXI7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlcShjaGFyLCAnKicpKSB7XG4gICAgICBlbnN1cmUoY3VycmVudFBhdGgsICdyZXBlYXQnLCAnJyk7XG4gICAgfSBlbHNlIGlmIChlcShjaGFyLCAneCcpKSB7XG4gICAgICBlbnN1cmUoY3VycmVudFBhdGgsICd3aWR0aCcsICcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW5zdXJlKGN1cnJlbnRQYXRoLCAndHlwZScsICcnKTtcbiAgICAgIGN1cnJlbnRQYXRoLnR5cGUgKz0gY2hhcjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0LmNoaWxkcmVuO1xufTtcbiJdfQ==
