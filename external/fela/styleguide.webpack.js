var path = require('path');
var fs = require('fs');

var appRoot = process.cwd();
var olympRoot = path.resolve(__dirname, '..', '..');

module.exports = function () {
  var config = {
    resolve: {
      modules: [],
      alias: {}
    }
  };

  config.resolve.modules.push(path.resolve(olympRoot, 'node_modules'));
  config.resolve.modules.push(path.resolve(appRoot, 'node_modules'));
  config.resolve.alias.olymp = olympRoot;

  fs.readdirSync(path.resolve(olympRoot, 'packages')).reduce(function (obj, item) {
    // get all folders in src and create 'olymp-xxx' alias
    config.resolve.modules.push(path.resolve(olympRoot, 'packages', item, 'node_modules'));
    config.resolve.alias['olymp-' + item] = path.resolve(olympRoot, 'packages', item);

    return obj;
  }, {});

  return config;
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhY2thZ2VzL2ZlbGEvc3R5bGVndWlkZS53ZWJwYWNrLmVzNiJdLCJuYW1lcyI6WyJwYXRoIiwicmVxdWlyZSIsImZzIiwiYXBwUm9vdCIsInByb2Nlc3MiLCJjd2QiLCJvbHltcFJvb3QiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwibW9kdWxlIiwiZXhwb3J0cyIsImNvbmZpZyIsIm1vZHVsZXMiLCJhbGlhcyIsInB1c2giLCJvbHltcCIsInJlYWRkaXJTeW5jIiwicmVkdWNlIiwib2JqIiwiaXRlbSJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBTUEsT0FBT0MsUUFBUSxNQUFSLENBQWI7QUFDQSxJQUFNQyxLQUFLRCxRQUFRLElBQVIsQ0FBWDs7QUFFQSxJQUFNRSxVQUFVQyxRQUFRQyxHQUFSLEVBQWhCO0FBQ0EsSUFBTUMsWUFBWU4sS0FBS08sT0FBTCxDQUFhQyxTQUFiLEVBQXdCLElBQXhCLEVBQThCLElBQTlCLENBQWxCOztBQUVBQyxPQUFPQyxPQUFQLEdBQWlCLFlBQU07QUFDckIsTUFBTUMsU0FBUztBQUNiSixhQUFTO0FBQ1BLLGVBQVMsRUFERjtBQUVQQyxhQUFPO0FBRkE7QUFESSxHQUFmOztBQU9BRixTQUFPSixPQUFQLENBQWVLLE9BQWYsQ0FBdUJFLElBQXZCLENBQTRCZCxLQUFLTyxPQUFMLENBQWFELFNBQWIsRUFBd0IsY0FBeEIsQ0FBNUI7QUFDQUssU0FBT0osT0FBUCxDQUFlSyxPQUFmLENBQXVCRSxJQUF2QixDQUE0QmQsS0FBS08sT0FBTCxDQUFhSixPQUFiLEVBQXNCLGNBQXRCLENBQTVCO0FBQ0FRLFNBQU9KLE9BQVAsQ0FBZU0sS0FBZixDQUFxQkUsS0FBckIsR0FBNkJULFNBQTdCOztBQUVBSixLQUFHYyxXQUFILENBQWVoQixLQUFLTyxPQUFMLENBQWFELFNBQWIsRUFBd0IsVUFBeEIsQ0FBZixFQUFvRFcsTUFBcEQsQ0FBMkQsVUFBQ0MsR0FBRCxFQUFNQyxJQUFOLEVBQWU7QUFDeEU7QUFDQVIsV0FBT0osT0FBUCxDQUFlSyxPQUFmLENBQXVCRSxJQUF2QixDQUNFZCxLQUFLTyxPQUFMLENBQWFELFNBQWIsRUFBd0IsVUFBeEIsRUFBb0NhLElBQXBDLEVBQTBDLGNBQTFDLENBREY7QUFHQVIsV0FBT0osT0FBUCxDQUFlTSxLQUFmLFlBQThCTSxJQUE5QixJQUF3Q25CLEtBQUtPLE9BQUwsQ0FDdENELFNBRHNDLEVBRXRDLFVBRnNDLEVBR3RDYSxJQUhzQyxDQUF4Qzs7QUFNQSxXQUFPRCxHQUFQO0FBQ0QsR0FaRCxFQVlHLEVBWkg7O0FBY0EsU0FBT1AsTUFBUDtBQUNELENBM0JEIiwiZmlsZSI6InBhY2thZ2VzL2ZlbGEvc3R5bGVndWlkZS53ZWJwYWNrLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcblxuY29uc3QgYXBwUm9vdCA9IHByb2Nlc3MuY3dkKCk7XG5jb25zdCBvbHltcFJvb3QgPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4nLCAnLi4nKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoKSA9PiB7XG4gIGNvbnN0IGNvbmZpZyA9IHtcbiAgICByZXNvbHZlOiB7XG4gICAgICBtb2R1bGVzOiBbXSxcbiAgICAgIGFsaWFzOiB7fSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbmZpZy5yZXNvbHZlLm1vZHVsZXMucHVzaChwYXRoLnJlc29sdmUob2x5bXBSb290LCAnbm9kZV9tb2R1bGVzJykpO1xuICBjb25maWcucmVzb2x2ZS5tb2R1bGVzLnB1c2gocGF0aC5yZXNvbHZlKGFwcFJvb3QsICdub2RlX21vZHVsZXMnKSk7XG4gIGNvbmZpZy5yZXNvbHZlLmFsaWFzLm9seW1wID0gb2x5bXBSb290O1xuXG4gIGZzLnJlYWRkaXJTeW5jKHBhdGgucmVzb2x2ZShvbHltcFJvb3QsICdwYWNrYWdlcycpKS5yZWR1Y2UoKG9iaiwgaXRlbSkgPT4ge1xuICAgIC8vIGdldCBhbGwgZm9sZGVycyBpbiBzcmMgYW5kIGNyZWF0ZSAnb2x5bXAteHh4JyBhbGlhc1xuICAgIGNvbmZpZy5yZXNvbHZlLm1vZHVsZXMucHVzaChcbiAgICAgIHBhdGgucmVzb2x2ZShvbHltcFJvb3QsICdwYWNrYWdlcycsIGl0ZW0sICdub2RlX21vZHVsZXMnKVxuICAgICk7XG4gICAgY29uZmlnLnJlc29sdmUuYWxpYXNbYG9seW1wLSR7aXRlbX1gXSA9IHBhdGgucmVzb2x2ZShcbiAgICAgIG9seW1wUm9vdCxcbiAgICAgICdwYWNrYWdlcycsXG4gICAgICBpdGVtXG4gICAgKTtcblxuICAgIHJldHVybiBvYmo7XG4gIH0sIHt9KTtcblxuICByZXR1cm4gY29uZmlnO1xufTtcbiJdfQ==
