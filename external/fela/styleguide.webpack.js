'use strict';

var path = require('path');
var fs = require('fs');

var appRoot = process.cwd();
var olympRoot = path.resolve(__dirname, '..', '..');

module.exports = function () {
  var config = {
    resolve: {
      modules: [],
      alias: {}
    }
  };

  config.resolve.modules.push(path.resolve(olympRoot, 'node_modules'));
  config.resolve.modules.push(path.resolve(appRoot, 'node_modules'));
  config.resolve.alias.olymp = olympRoot;

  fs.readdirSync(path.resolve(olympRoot, 'packages')).reduce(function (obj, item) {
    // get all folders in src and create 'olymp-xxx' alias
    config.resolve.modules.push(path.resolve(olympRoot, 'packages', item, 'node_modules'));
    config.resolve.alias['olymp-' + item] = path.resolve(olympRoot, 'packages', item);

    return obj;
  }, {});

  return config;
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dGVybmFsL2ZlbGEvc3R5bGVndWlkZS53ZWJwYWNrLmVzNiJdLCJuYW1lcyI6WyJwYXRoIiwicmVxdWlyZSIsImZzIiwiYXBwUm9vdCIsInByb2Nlc3MiLCJjd2QiLCJvbHltcFJvb3QiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwibW9kdWxlIiwiZXhwb3J0cyIsImNvbmZpZyIsIm1vZHVsZXMiLCJhbGlhcyIsInB1c2giLCJvbHltcCIsInJlYWRkaXJTeW5jIiwicmVkdWNlIiwib2JqIiwiaXRlbSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxPQUFPQyxRQUFRLE1BQVIsQ0FBYjtBQUNBLElBQU1DLEtBQUtELFFBQVEsSUFBUixDQUFYOztBQUVBLElBQU1FLFVBQVVDLFFBQVFDLEdBQVIsRUFBaEI7QUFDQSxJQUFNQyxZQUFZTixLQUFLTyxPQUFMLENBQWFDLFNBQWIsRUFBd0IsSUFBeEIsRUFBOEIsSUFBOUIsQ0FBbEI7O0FBRUFDLE9BQU9DLE9BQVAsR0FBaUIsWUFBTTtBQUNyQixNQUFNQyxTQUFTO0FBQ2JKLGFBQVM7QUFDUEssZUFBUyxFQURGO0FBRVBDLGFBQU87QUFGQTtBQURJLEdBQWY7O0FBT0FGLFNBQU9KLE9BQVAsQ0FBZUssT0FBZixDQUF1QkUsSUFBdkIsQ0FBNEJkLEtBQUtPLE9BQUwsQ0FBYUQsU0FBYixFQUF3QixjQUF4QixDQUE1QjtBQUNBSyxTQUFPSixPQUFQLENBQWVLLE9BQWYsQ0FBdUJFLElBQXZCLENBQTRCZCxLQUFLTyxPQUFMLENBQWFKLE9BQWIsRUFBc0IsY0FBdEIsQ0FBNUI7QUFDQVEsU0FBT0osT0FBUCxDQUFlTSxLQUFmLENBQXFCRSxLQUFyQixHQUE2QlQsU0FBN0I7O0FBRUFKLEtBQUdjLFdBQUgsQ0FBZWhCLEtBQUtPLE9BQUwsQ0FBYUQsU0FBYixFQUF3QixVQUF4QixDQUFmLEVBQW9EVyxNQUFwRCxDQUEyRCxVQUFDQyxHQUFELEVBQU1DLElBQU4sRUFBZTtBQUN4RTtBQUNBUixXQUFPSixPQUFQLENBQWVLLE9BQWYsQ0FBdUJFLElBQXZCLENBQ0VkLEtBQUtPLE9BQUwsQ0FBYUQsU0FBYixFQUF3QixVQUF4QixFQUFvQ2EsSUFBcEMsRUFBMEMsY0FBMUMsQ0FERjtBQUdBUixXQUFPSixPQUFQLENBQWVNLEtBQWYsWUFBOEJNLElBQTlCLElBQXdDbkIsS0FBS08sT0FBTCxDQUN0Q0QsU0FEc0MsRUFFdEMsVUFGc0MsRUFHdENhLElBSHNDLENBQXhDOztBQU1BLFdBQU9ELEdBQVA7QUFDRCxHQVpELEVBWUcsRUFaSDs7QUFjQSxTQUFPUCxNQUFQO0FBQ0QsQ0EzQkQiLCJmaWxlIjoiZXh0ZXJuYWwvZmVsYS9zdHlsZWd1aWRlLndlYnBhY2suanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5jb25zdCBhcHBSb290ID0gcHJvY2Vzcy5jd2QoKTtcbmNvbnN0IG9seW1wUm9vdCA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLicsICcuLicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICgpID0+IHtcbiAgY29uc3QgY29uZmlnID0ge1xuICAgIHJlc29sdmU6IHtcbiAgICAgIG1vZHVsZXM6IFtdLFxuICAgICAgYWxpYXM6IHt9LFxuICAgIH0sXG4gIH07XG5cbiAgY29uZmlnLnJlc29sdmUubW9kdWxlcy5wdXNoKHBhdGgucmVzb2x2ZShvbHltcFJvb3QsICdub2RlX21vZHVsZXMnKSk7XG4gIGNvbmZpZy5yZXNvbHZlLm1vZHVsZXMucHVzaChwYXRoLnJlc29sdmUoYXBwUm9vdCwgJ25vZGVfbW9kdWxlcycpKTtcbiAgY29uZmlnLnJlc29sdmUuYWxpYXMub2x5bXAgPSBvbHltcFJvb3Q7XG5cbiAgZnMucmVhZGRpclN5bmMocGF0aC5yZXNvbHZlKG9seW1wUm9vdCwgJ3BhY2thZ2VzJykpLnJlZHVjZSgob2JqLCBpdGVtKSA9PiB7XG4gICAgLy8gZ2V0IGFsbCBmb2xkZXJzIGluIHNyYyBhbmQgY3JlYXRlICdvbHltcC14eHgnIGFsaWFzXG4gICAgY29uZmlnLnJlc29sdmUubW9kdWxlcy5wdXNoKFxuICAgICAgcGF0aC5yZXNvbHZlKG9seW1wUm9vdCwgJ3BhY2thZ2VzJywgaXRlbSwgJ25vZGVfbW9kdWxlcycpXG4gICAgKTtcbiAgICBjb25maWcucmVzb2x2ZS5hbGlhc1tgb2x5bXAtJHtpdGVtfWBdID0gcGF0aC5yZXNvbHZlKFxuICAgICAgb2x5bXBSb290LFxuICAgICAgJ3BhY2thZ2VzJyxcbiAgICAgIGl0ZW1cbiAgICApO1xuXG4gICAgcmV0dXJuIG9iajtcbiAgfSwge30pO1xuXG4gIHJldHVybiBjb25maWc7XG59O1xuIl19
